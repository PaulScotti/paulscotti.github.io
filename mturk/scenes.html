<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

<!-- All stuff in this style division are in CSS -->
<style type="text/css">.trialDiv {
	border: 2px solid gray;
	padding: 20px;
	width: 200px;
	margin: 0 auto;
	font-family: Arial, Helvetica;
	font-size: 14pt;
	display: none;
	position: relative;
}

#instructions {
	width: 300px;
	margin: 0 auto;
	text-align: center;
	margin-top: 50px;
}

#startExperimentButton {
	width: 150px;
	border: 2px outset gray;
	background: rgb(150,150,150);
	padding: 10px;
	text-align: center;
	margin: 0 auto;
}

#startExperiment {
	color: white;
	text-decoration: none;
}

#startExperiment:hover {
	color: rgb(200,200,200);
}

#nextButton {
	color: gray;
	text-decoration: none;
}

#circle_up {
	width: 10px;
	height: 10px;
	-webkit-border-radius: 25px;
	-moz-border-radius: 25px;
	border-radius: 25px;
	background: red;
	position: absolute;
	bottom: 260; left: 114px;
}

#circle_down {
	width: 10px;
	height: 10px;
	-webkit-border-radius: 25px;
	-moz-border-radius: 25px;
	border-radius: 25px;
	background: red;
	position: absolute;
	bottom: 160; left: 114px;
}

.slider
{width: 200px;}

#submitButton {
	display: none;
}

</style>

<!-- STEPS
EXP 1
2. Upload repository of hundred scenes
3. Display one of the scenes at random
4. Red dot can appear in upper middle of screen or lower middle of screen
5. Make a slider to determine how far away the red dot is perceived to be
5b. Record their input (which scene and what dot location) so we can later look at it along with what scene it was they judged
6. Continue until all scenes have gotten distance measurement
7. Add instructions to beginning where we inform S to task and give example as to what far ends and middle of slider represent

EXP 2
1. Present one of the random hundred scenes for 1 sec
2. Present red dot
3. At random time between 1s to 5s, change color from red to green
4. Task is to press spacebar as soon as red dot changes color
5. Record RTs and the associated scene
-->

<!-- Now using html!!! -->

<div id="instructions">
<p>Judge the perceived distance of the red dot.</p>
	<div id="startExperimentButton">
		<a href="#" id="startExperiment">Start Experiment</a>
	</div>
</div>


<!-- FIRST TRIAL -->
<div class="trialDiv" id="trial1_up">
<p><img src="http://paulscotti.github.io/mturk/scenes/scene101.jpg" height="200" width="200" id="trialImage1"/></p>
<input class="slider" name="question1" width="200" type="range" min="1" max="100" value="50"/>
	<br>
		<div style="float: left">closer</div>
		<div style="float: right">farther</div>
	</br>
<div id="circle_up">
</div>

<center><br>
	<a href="#" class="responseButton" id="nextButton">Next</a>
</br></center>

</div>



<div class="trialDiv" id="trial1_down">
<p><img src="http://paulscotti.github.io/mturk/scenes/scene101.jpg" height="200" width="200" id="trialImage1"/></p>
<p><input class="slider" name="question1" type="range" min="1" max="100" value="50" /> smaller</p>

<div id="circle_down">
</div>

<p><input class="responseButton" name="done" type="radio" value="0" />Done?</p>
</div>

<div class="trialDiv" id="trial2_up">
<p><img src="http://paulscotti.github.io/mturk/scenes/scene102.jpg" height="200" width="200" id="trialImage2"/></p>
<p><input class="slider" name="question2" type="range" min="1" max="100" value="50" /> smaller</p>

<div id="circle_up">
</div>

<p><input class="responseButton" name="done" type="radio" value="0" />Done?</p>
</div>



<div class="trialDiv" id="trial2_down">
<p><img src="http://paulscotti.github.io/mturk/scenes/scene102.jpg" height="200" width="200" id="trialImage2"/></p>
<p><input class="slider" name="question2" type="range" min="1" max="100" value="50" /> smaller</p>

<div id="circle_down">
</div>

<p><input class="responseButton" name="done" type="radio" value="0" />Done?</p>
</div>

<!-- script can only access stuff that the browser has already figured out, so put last
$ is the function for jQuery
Below code is javascript now!!! -->

<script>
var trialOrder = shuffle([1,2]);
var curTrial = 0;
var nTrials = 2;
var startTrialTime;
var dot_array = shuffle([0,0,1,1]);

// Fisher-Yates shuffle
function shuffle(o) {
    for(var j, x, i = o.length; i; j = parseInt(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
    return o;
}

/*function buttonClicked() {
	// $('curTrialImage').attr('src','newImage') but this leads to problems
	$('#trial' + curTrial).hide();
	curTrial++;
  $('#trial' + curTrial).show();
} */

function buttonClicked() {
  var curTime = new Date();
	var rt = curTime - startTrialTime;
	console.log(rt);

	if (dot_array[curTrial] == 0) {
		$('#trial' + trialOrder[curTrial] + '_up').hide();
	} else {
		$('#trial' + trialOrder[curTrial] + '_down').hide();
	}

	curTrial++;
	if (curTrial >= nTrials) {
		$('#submitButton').show();
	} else {
		if (dot_array[curTrial] == 0) {
			$('#trial' + trialOrder[curTrial] + '_up').show();
		} else {
			$('#trial' + trialOrder[curTrial] + '_down').show();
	}
		startTrialTime = new Date();
	}
}

/* function showTrial(whichImage) {
	$(whichImage).show('#trialImage' + whichImage);
	setTimeout(function() {
		$('#trialImage' + whichImage).hide();
			setTimeout(function() {
				$('#trialImage' + whichImage).show();
			}, 600);
	}, 600); */

	/*Listen for keys
	$(document).bind("keydown.listenforKeys"), function(event) {
		console.log(event.which);
		$(document).unbind("keydown.listenforKeys");
	}
} */

function showFirstTrial() {
	if (dot_array[curTrial] == 0) {
		$('#trial' + trialOrder[curTrial] + '_up').show();
	} else {
		$('#trial' + trialOrder[curTrial] + '_down').show();
	}
	startTrialTime = new Date();
	$('#instructions').hide();
}

$('#startExperiment').click(showFirstTrial);
$('.responseButton').click(buttonClicked);

</script>

<!-- do not put this on turk -->
<input type="submit" id="submitButton">
