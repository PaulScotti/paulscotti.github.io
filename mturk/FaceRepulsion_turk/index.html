<!-- Paul Scotti 2021 -->
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
  <script src="https://paulscotti.github.io/mturk/js_code/jquery.min.js"></script>
  <script src="https://paulscotti.github.io/mturk/js_code/seedrandom.js"></script>
  <script src="https://paulscotti.github.io/mturk/js_code/chance.js"></script>
  <script src="https://paulscotti.github.io/mturk/Cont_LTM_101_files/TimTurkTools.js"></script>
  <script>
  let WORKERID = (IsOnTurk()) ? GetWorkerId() : prompt("You don't look like an mTurker! " +
    "Enter an ID to save your data with (any number/string will do). Your id is used to seed the experiment rng:", "workID");
  let ASSIGNMENTID = (IsOnTurk()) ? GetAssignmentId() : prompt("Set assignment number (doesnt matter for testing):", "assignmentId");
  const startDate = new Date(); 
  </script>
  <!-- Custom functions -->
  <script> 
    function CheckInfo() {
      if (($('#age').val() == "") || ($('#gender').val() == "")) {
        alert('Please fill out all required input fields.')
      } else if (!(parseFloat($('#age').val()) >= 18)) {
        alert('Please input a valid age. You must be at least 18 years old to participate.')
      } else {
        if ($('#age').val() > 35) {
          $('body').html('<center><b>Unfortunately, this experiment does not allow participants over 35 years old (we separately study older populations).<br><br>Please return this HIT.<br><br>You will not be paid if you try again and change your age.</b></center>');
        } else {
          $('#info').hide()
          // ImagesReady() // remove 3 lines below!!
          $('#loading').hide();
          console.log("Images fully loaded.")
          StartExperiment()
        }
      }
    }
    function counter(start, end, interval) {
      if (interval == undefined) {
        interval = 1;
      }
      let result = [];
      if (start > end) {
        start = start - 360;
      }
      while (start <= end) {
        result = result.concat(start);
        start = start + interval;
      }
      return result;
    }
    function derangementNumber(n) {
      if(n == 0) {
          return 1;
      }
      var factorial = 1;
      while(n) {
          factorial *= n--;
      }
      return Math.floor(factorial / Math.E);
    }
    function derange(array) {
        array = array.slice();
        var mark = array.map(function() { return false; });
        for(var i = array.length - 1, u = array.length - 1; u > 0; i--) {
            if(!mark[i]) {
                var unmarked = mark.map(function(_, i) { return i; })
                    .filter(function(j) { return !mark[j] && j < i; });
                var j = unmarked[Math.floor(Math.random() * unmarked.length)];

                var tmp = array[j];
                array[j] = array[i];
                array[i] = tmp;

                // this introduces the unbiased random characteristic
                if(Math.random() < u * derangementNumber(u - 1) /  derangementNumber(u + 1)) {
                    mark[j] = true;
                    u--;
                }
                u--;
            }
        }
        return array;
    }
    var isArray = Array.isArray || function(value) {
      return {}.toString.call(value) !== "[object Array]"
    };
    function sharedShuffleInPlace() {
      var arrLength = 0;
      var argsLength = arguments.length;
      var rnd, tmp;

      for (var index = 0; index < argsLength; index += 1) {
        if (!isArray(arguments[index])) {
          throw new TypeError("Argument is not an array.");
        }

        if (index === 0) {
          arrLength = arguments[0].length;
        }

        if (arrLength !== arguments[index].length) {
          throw new RangeError("Array lengths do not match.");
        }
      }

      while (arrLength) {
        rnd = Math.floor(Math.random() * arrLength);
        arrLength -= 1;
        for (argsIndex = 0; argsIndex < argsLength; argsIndex += 1) {
          tmp = arguments[argsIndex][arrLength];
          arguments[argsIndex][arrLength] = arguments[argsIndex][rnd];
          arguments[argsIndex][rnd] = tmp;
        }
      }
    }
    function shuffle(o) {
        for(var j, x, i = o.length; i; j = Math.floor(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
        return o;
    }
    function permutation( length ) {
      var p = [], i;
      for (i = 0; i < length; ++i) p[i] = i;
      return shuffle(p);
    }
    function permute( a, p ) {
      var r = [];
      for (var i = 0; i < a.length; ++i)
        r.push(a[p[i]]);
      for (i = 0; i < a.length; ++i)
        a[i] = r[i];
      return r
    }
    function readTextFile(file, callback) {
        var rawFile = new XMLHttpRequest();
        rawFile.overrideMimeType("application/json");
        rawFile.open("GET", file, true);
        rawFile.onreadystatechange = function() {
            if (rawFile.readyState === 4 && rawFile.status == "200") {
                callback(rawFile.responseText);
            }
        }
        rawFile.send(null);
    }
    function randomInts(min, max) { // min and max included 
      return Math.floor(Math.random() * (max - min + 1) + min)
    }
 </script>
  <!-- Add CSS elements -->
  <style>
    body {
      font-family: Arial, Helvetica;
      background-color: #ffffff !important;
    }
    #showTrial {
      width: 600px;
      height: 600px;
      border: 1px solid black;
      background: #FFFFFF;
      margin: 5px auto;
      position: relative;
      display: none;
    }
    #fixation {
      position: absolute;
      width: 600px;
      top: 285px;
      text-align: center;
      font-size: 30px;
      font-weight: bold;
    }
    #item {
      position: absolute;
      width: 300px;
      height: 300px;
      top:150px;
      left:150px;
      display: none;
    }
    #itemL {
      position: absolute;
      width: 300px;
      height: 300px;
      top:150px;
      left:0px;
      display: none;
    }
    #itemR {
      position: absolute;
      width: 300px;
      height: 300px;
      top:150px;
      left:300px;
      display: none;
    }
    #progress {
      position:absolute;
      bottom:-5px;
      left:5px;
    }
    .number_buttons{
      position:absolute;
      font-size:32px;
    }
    #numbers {
      display:none;
    }
    #button_instruct {
      position:absolute;
      text-align:center;
      top:50px;
      left:60px;
      font-size:18px;
    }
    #report_instruct {
      display:none;
      position:absolute;
      text-align:center;
      top:50px;
      left:40px;
      font-size:18px;
    }
    #button1 {
      bottom:70px;
      left:100px;
    }
    #button2 {
      bottom:30px;
      left:100px;
    }
    #button3 {
      bottom:70px;
      left:375px;
    }
    #button4 {
      bottom:30px;
      left:375px;
    }
    /* #slide {
      position: absolute;
      display: none;
      right:150px;
      bottom:100px;
      width:50%; 
      outline: none;
      -webkit-transition: .2s;
      transition: opacity .2s;
    } */
    .circle_container{
      display: none;
      position:absolute !important;
      top: 460px;
      left: 230px;
    }
    #circle { 
      width:120px; 
      height:120px;
      border:4px solid grey; 
      border-radius:100%;
      float:left;
      margin-right:40px;
    }
    #slider { 
      position:relative; 
      height:0px; 
      width:25px; 
      background:grey; 
      left:.5px; 
      top:10.5px; 
      border-radius:100%;
      cursor:pointer;
    }
    #FaceConfirm {
      position: absolute;
      bottom:57px;
      left:388px;
      display:none;
    }
    .Button {
      display: inline-block;
      color: black;
      border: 3px outset gray;
      background-color: #CCCCCC;
      padding: 8px;
      text-decoration: none;
      font-family: Arial, Helvetica;
      font-weight: bold;
    }
    .Button:hover {
      border: 3px inset gray;
    }
    .Button:active {
      border: 3px inset gray;
    }
    .modalDialog:target {
      opacity:1;
      pointer-events: auto;
    }
    .modalDialog > div {
      width: 400px;
      position: relative;
      margin: 10% auto;
      padding: 5px 20px 13px 20px;
      border-radius: 10px;
      border-style: solid;
      border-color: black;
      background: #fff;
    }
    .close {
      background: #606061;
      color: #FFFFFF;
      line-height: 25px;
      position: absolute;
      right: -12px;
      text-align: center;
      top: -10px;
      width: 24px;
      text-decoration: none;
      font-weight: bold;
      -webkit-border-radius: 12px;
      -moz-border-radius: 12px;
      border-radius: 12px;
      -moz-box-shadow: 1px 1px 3px #000;
      -webkit-box-shadow: 1px 1px 3px #000;
      box-shadow: 1px 1px 3px #000;
    }
    .close:hover { background: #00d9ff; }
    #done {
      display: none;
      width: 600px;
      height: 600px;
      margin: 0 auto;
      margin-top: 30px;
    }
  </style>
  <!-- Preload images so they dont need to be loaded mid-experiment -->
  <script>
    readTextFile("https://paulscotti.github.io/mturk/FaceRepulsion_turk/design/img_ids.json", function(text){img_ids=JSON.parse(text)});
    
    document.write('<img id="0_0" src="https://paulscotti.github.io/mturk/face_triangles/0_0.jpg" style="display:none"><img id="0_1" src="https://paulscotti.github.io/mturk/face_triangles/0_1.jpg" style="display:none"><img id="0_10" src="https://paulscotti.github.io/mturk/face_triangles/0_10.jpg" style="display:none"><img id="0_100" src="https://paulscotti.github.io/mturk/face_triangles/0_100.jpg" style="display:none"><img id="0_101" src="https://paulscotti.github.io/mturk/face_triangles/0_101.jpg" style="display:none"><img id="0_102" src="https://paulscotti.github.io/mturk/face_triangles/0_102.jpg" style="display:none"><img id="0_103" src="https://paulscotti.github.io/mturk/face_triangles/0_103.jpg" style="display:none"><img id="0_104" src="https://paulscotti.github.io/mturk/face_triangles/0_104.jpg" style="display:none"><img id="0_105" src="https://paulscotti.github.io/mturk/face_triangles/0_105.jpg" style="display:none"><img id="0_106" src="https://paulscotti.github.io/mturk/face_triangles/0_106.jpg" style="display:none"><img id="0_107" src="https://paulscotti.github.io/mturk/face_triangles/0_107.jpg" style="display:none"><img id="0_108" src="https://paulscotti.github.io/mturk/face_triangles/0_108.jpg" style="display:none"><img id="0_109" src="https://paulscotti.github.io/mturk/face_triangles/0_109.jpg" style="display:none"><img id="0_11" src="https://paulscotti.github.io/mturk/face_triangles/0_11.jpg" style="display:none"><img id="0_110" src="https://paulscotti.github.io/mturk/face_triangles/0_110.jpg" style="display:none"><img id="0_111" src="https://paulscotti.github.io/mturk/face_triangles/0_111.jpg" style="display:none"><img id="0_112" src="https://paulscotti.github.io/mturk/face_triangles/0_112.jpg" style="display:none"><img id="0_113" src="https://paulscotti.github.io/mturk/face_triangles/0_113.jpg" style="display:none"><img id="0_114" src="https://paulscotti.github.io/mturk/face_triangles/0_114.jpg" style="display:none"><img id="0_115" src="https://paulscotti.github.io/mturk/face_triangles/0_115.jpg" style="display:none"><img id="0_116" src="https://paulscotti.github.io/mturk/face_triangles/0_116.jpg" style="display:none"><img id="0_117" src="https://paulscotti.github.io/mturk/face_triangles/0_117.jpg" style="display:none"><img id="0_118" src="https://paulscotti.github.io/mturk/face_triangles/0_118.jpg" style="display:none"><img id="0_119" src="https://paulscotti.github.io/mturk/face_triangles/0_119.jpg" style="display:none"><img id="0_12" src="https://paulscotti.github.io/mturk/face_triangles/0_12.jpg" style="display:none"><img id="0_13" src="https://paulscotti.github.io/mturk/face_triangles/0_13.jpg" style="display:none"><img id="0_14" src="https://paulscotti.github.io/mturk/face_triangles/0_14.jpg" style="display:none"><img id="0_15" src="https://paulscotti.github.io/mturk/face_triangles/0_15.jpg" style="display:none"><img id="0_16" src="https://paulscotti.github.io/mturk/face_triangles/0_16.jpg" style="display:none"><img id="0_17" src="https://paulscotti.github.io/mturk/face_triangles/0_17.jpg" style="display:none"><img id="0_18" src="https://paulscotti.github.io/mturk/face_triangles/0_18.jpg" style="display:none"><img id="0_19" src="https://paulscotti.github.io/mturk/face_triangles/0_19.jpg" style="display:none"><img id="0_2" src="https://paulscotti.github.io/mturk/face_triangles/0_2.jpg" style="display:none"><img id="0_20" src="https://paulscotti.github.io/mturk/face_triangles/0_20.jpg" style="display:none"><img id="0_21" src="https://paulscotti.github.io/mturk/face_triangles/0_21.jpg" style="display:none"><img id="0_22" src="https://paulscotti.github.io/mturk/face_triangles/0_22.jpg" style="display:none"><img id="0_23" src="https://paulscotti.github.io/mturk/face_triangles/0_23.jpg" style="display:none"><img id="0_24" src="https://paulscotti.github.io/mturk/face_triangles/0_24.jpg" style="display:none"><img id="0_25" src="https://paulscotti.github.io/mturk/face_triangles/0_25.jpg" style="display:none"><img id="0_26" src="https://paulscotti.github.io/mturk/face_triangles/0_26.jpg" style="display:none"><img id="0_27" src="https://paulscotti.github.io/mturk/face_triangles/0_27.jpg" style="display:none"><img id="0_28" src="https://paulscotti.github.io/mturk/face_triangles/0_28.jpg" style="display:none"><img id="0_29" src="https://paulscotti.github.io/mturk/face_triangles/0_29.jpg" style="display:none"><img id="0_3" src="https://paulscotti.github.io/mturk/face_triangles/0_3.jpg" style="display:none"><img id="0_30" src="https://paulscotti.github.io/mturk/face_triangles/0_30.jpg" style="display:none"><img id="0_31" src="https://paulscotti.github.io/mturk/face_triangles/0_31.jpg" style="display:none"><img id="0_32" src="https://paulscotti.github.io/mturk/face_triangles/0_32.jpg" style="display:none"><img id="0_33" src="https://paulscotti.github.io/mturk/face_triangles/0_33.jpg" style="display:none"><img id="0_34" src="https://paulscotti.github.io/mturk/face_triangles/0_34.jpg" style="display:none"><img id="0_35" src="https://paulscotti.github.io/mturk/face_triangles/0_35.jpg" style="display:none"><img id="0_36" src="https://paulscotti.github.io/mturk/face_triangles/0_36.jpg" style="display:none"><img id="0_37" src="https://paulscotti.github.io/mturk/face_triangles/0_37.jpg" style="display:none"><img id="0_38" src="https://paulscotti.github.io/mturk/face_triangles/0_38.jpg" style="display:none"><img id="0_39" src="https://paulscotti.github.io/mturk/face_triangles/0_39.jpg" style="display:none"><img id="0_4" src="https://paulscotti.github.io/mturk/face_triangles/0_4.jpg" style="display:none"><img id="0_40" src="https://paulscotti.github.io/mturk/face_triangles/0_40.jpg" style="display:none"><img id="0_41" src="https://paulscotti.github.io/mturk/face_triangles/0_41.jpg" style="display:none"><img id="0_42" src="https://paulscotti.github.io/mturk/face_triangles/0_42.jpg" style="display:none"><img id="0_43" src="https://paulscotti.github.io/mturk/face_triangles/0_43.jpg" style="display:none"><img id="0_44" src="https://paulscotti.github.io/mturk/face_triangles/0_44.jpg" style="display:none"><img id="0_45" src="https://paulscotti.github.io/mturk/face_triangles/0_45.jpg" style="display:none"><img id="0_46" src="https://paulscotti.github.io/mturk/face_triangles/0_46.jpg" style="display:none"><img id="0_47" src="https://paulscotti.github.io/mturk/face_triangles/0_47.jpg" style="display:none"><img id="0_48" src="https://paulscotti.github.io/mturk/face_triangles/0_48.jpg" style="display:none"><img id="0_49" src="https://paulscotti.github.io/mturk/face_triangles/0_49.jpg" style="display:none"><img id="0_5" src="https://paulscotti.github.io/mturk/face_triangles/0_5.jpg" style="display:none"><img id="0_50" src="https://paulscotti.github.io/mturk/face_triangles/0_50.jpg" style="display:none"><img id="0_51" src="https://paulscotti.github.io/mturk/face_triangles/0_51.jpg" style="display:none"><img id="0_52" src="https://paulscotti.github.io/mturk/face_triangles/0_52.jpg" style="display:none"><img id="0_53" src="https://paulscotti.github.io/mturk/face_triangles/0_53.jpg" style="display:none"><img id="0_54" src="https://paulscotti.github.io/mturk/face_triangles/0_54.jpg" style="display:none"><img id="0_55" src="https://paulscotti.github.io/mturk/face_triangles/0_55.jpg" style="display:none"><img id="0_56" src="https://paulscotti.github.io/mturk/face_triangles/0_56.jpg" style="display:none"><img id="0_57" src="https://paulscotti.github.io/mturk/face_triangles/0_57.jpg" style="display:none"><img id="0_58" src="https://paulscotti.github.io/mturk/face_triangles/0_58.jpg" style="display:none"><img id="0_59" src="https://paulscotti.github.io/mturk/face_triangles/0_59.jpg" style="display:none"><img id="0_6" src="https://paulscotti.github.io/mturk/face_triangles/0_6.jpg" style="display:none"><img id="0_60" src="https://paulscotti.github.io/mturk/face_triangles/0_60.jpg" style="display:none"><img id="0_61" src="https://paulscotti.github.io/mturk/face_triangles/0_61.jpg" style="display:none"><img id="0_62" src="https://paulscotti.github.io/mturk/face_triangles/0_62.jpg" style="display:none"><img id="0_63" src="https://paulscotti.github.io/mturk/face_triangles/0_63.jpg" style="display:none"><img id="0_64" src="https://paulscotti.github.io/mturk/face_triangles/0_64.jpg" style="display:none"><img id="0_65" src="https://paulscotti.github.io/mturk/face_triangles/0_65.jpg" style="display:none"><img id="0_66" src="https://paulscotti.github.io/mturk/face_triangles/0_66.jpg" style="display:none"><img id="0_67" src="https://paulscotti.github.io/mturk/face_triangles/0_67.jpg" style="display:none"><img id="0_68" src="https://paulscotti.github.io/mturk/face_triangles/0_68.jpg" style="display:none"><img id="0_69" src="https://paulscotti.github.io/mturk/face_triangles/0_69.jpg" style="display:none"><img id="0_7" src="https://paulscotti.github.io/mturk/face_triangles/0_7.jpg" style="display:none"><img id="0_70" src="https://paulscotti.github.io/mturk/face_triangles/0_70.jpg" style="display:none"><img id="0_71" src="https://paulscotti.github.io/mturk/face_triangles/0_71.jpg" style="display:none"><img id="0_72" src="https://paulscotti.github.io/mturk/face_triangles/0_72.jpg" style="display:none"><img id="0_73" src="https://paulscotti.github.io/mturk/face_triangles/0_73.jpg" style="display:none"><img id="0_74" src="https://paulscotti.github.io/mturk/face_triangles/0_74.jpg" style="display:none"><img id="0_75" src="https://paulscotti.github.io/mturk/face_triangles/0_75.jpg" style="display:none"><img id="0_76" src="https://paulscotti.github.io/mturk/face_triangles/0_76.jpg" style="display:none"><img id="0_77" src="https://paulscotti.github.io/mturk/face_triangles/0_77.jpg" style="display:none"><img id="0_78" src="https://paulscotti.github.io/mturk/face_triangles/0_78.jpg" style="display:none"><img id="0_79" src="https://paulscotti.github.io/mturk/face_triangles/0_79.jpg" style="display:none"><img id="0_8" src="https://paulscotti.github.io/mturk/face_triangles/0_8.jpg" style="display:none"><img id="0_80" src="https://paulscotti.github.io/mturk/face_triangles/0_80.jpg" style="display:none"><img id="0_81" src="https://paulscotti.github.io/mturk/face_triangles/0_81.jpg" style="display:none"><img id="0_82" src="https://paulscotti.github.io/mturk/face_triangles/0_82.jpg" style="display:none"><img id="0_83" src="https://paulscotti.github.io/mturk/face_triangles/0_83.jpg" style="display:none"><img id="0_84" src="https://paulscotti.github.io/mturk/face_triangles/0_84.jpg" style="display:none"><img id="0_85" src="https://paulscotti.github.io/mturk/face_triangles/0_85.jpg" style="display:none"><img id="0_86" src="https://paulscotti.github.io/mturk/face_triangles/0_86.jpg" style="display:none"><img id="0_87" src="https://paulscotti.github.io/mturk/face_triangles/0_87.jpg" style="display:none"><img id="0_88" src="https://paulscotti.github.io/mturk/face_triangles/0_88.jpg" style="display:none"><img id="0_89" src="https://paulscotti.github.io/mturk/face_triangles/0_89.jpg" style="display:none"><img id="0_9" src="https://paulscotti.github.io/mturk/face_triangles/0_9.jpg" style="display:none"><img id="0_90" src="https://paulscotti.github.io/mturk/face_triangles/0_90.jpg" style="display:none"><img id="0_91" src="https://paulscotti.github.io/mturk/face_triangles/0_91.jpg" style="display:none"><img id="0_92" src="https://paulscotti.github.io/mturk/face_triangles/0_92.jpg" style="display:none"><img id="0_93" src="https://paulscotti.github.io/mturk/face_triangles/0_93.jpg" style="display:none"><img id="0_94" src="https://paulscotti.github.io/mturk/face_triangles/0_94.jpg" style="display:none"><img id="0_95" src="https://paulscotti.github.io/mturk/face_triangles/0_95.jpg" style="display:none"><img id="0_96" src="https://paulscotti.github.io/mturk/face_triangles/0_96.jpg" style="display:none"><img id="0_97" src="https://paulscotti.github.io/mturk/face_triangles/0_97.jpg" style="display:none"><img id="0_98" src="https://paulscotti.github.io/mturk/face_triangles/0_98.jpg" style="display:none"><img id="0_99" src="https://paulscotti.github.io/mturk/face_triangles/0_99.jpg" style="display:none">')

    document.write('<img id="obj0" src="https://paulscotti.github.io/mturk/unique_objects/obj0.png" style="position:absolute;display:none"><img id="obj1" src="https://paulscotti.github.io/mturk/unique_objects/obj1.png" style="position:absolute;display:none"><img id="obj10" src="https://paulscotti.github.io/mturk/unique_objects/obj10.png" style="position:absolute;display:none"><img id="obj100" src="https://paulscotti.github.io/mturk/unique_objects/obj100.png" style="position:absolute;display:none"><img id="obj101" src="https://paulscotti.github.io/mturk/unique_objects/obj101.png" style="position:absolute;display:none"><img id="obj102" src="https://paulscotti.github.io/mturk/unique_objects/obj102.png" style="position:absolute;display:none"><img id="obj103" src="https://paulscotti.github.io/mturk/unique_objects/obj103.png" style="position:absolute;display:none"><img id="obj104" src="https://paulscotti.github.io/mturk/unique_objects/obj104.png" style="position:absolute;display:none"><img id="obj105" src="https://paulscotti.github.io/mturk/unique_objects/obj105.png" style="position:absolute;display:none"><img id="obj106" src="https://paulscotti.github.io/mturk/unique_objects/obj106.png" style="position:absolute;display:none"><img id="obj107" src="https://paulscotti.github.io/mturk/unique_objects/obj107.png" style="position:absolute;display:none"><img id="obj108" src="https://paulscotti.github.io/mturk/unique_objects/obj108.png" style="position:absolute;display:none"><img id="obj109" src="https://paulscotti.github.io/mturk/unique_objects/obj109.png" style="position:absolute;display:none"><img id="obj11" src="https://paulscotti.github.io/mturk/unique_objects/obj11.png" style="position:absolute;display:none"><img id="obj110" src="https://paulscotti.github.io/mturk/unique_objects/obj110.png" style="position:absolute;display:none"><img id="obj111" src="https://paulscotti.github.io/mturk/unique_objects/obj111.png" style="position:absolute;display:none"><img id="obj112" src="https://paulscotti.github.io/mturk/unique_objects/obj112.png" style="position:absolute;display:none"><img id="obj113" src="https://paulscotti.github.io/mturk/unique_objects/obj113.png" style="position:absolute;display:none"><img id="obj114" src="https://paulscotti.github.io/mturk/unique_objects/obj114.png" style="position:absolute;display:none"><img id="obj115" src="https://paulscotti.github.io/mturk/unique_objects/obj115.png" style="position:absolute;display:none"><img id="obj116" src="https://paulscotti.github.io/mturk/unique_objects/obj116.png" style="position:absolute;display:none"><img id="obj117" src="https://paulscotti.github.io/mturk/unique_objects/obj117.png" style="position:absolute;display:none"><img id="obj118" src="https://paulscotti.github.io/mturk/unique_objects/obj118.png" style="position:absolute;display:none"><img id="obj119" src="https://paulscotti.github.io/mturk/unique_objects/obj119.png" style="position:absolute;display:none"><img id="obj12" src="https://paulscotti.github.io/mturk/unique_objects/obj12.png" style="position:absolute;display:none"><img id="obj120" src="https://paulscotti.github.io/mturk/unique_objects/obj120.png" style="position:absolute;display:none"><img id="obj121" src="https://paulscotti.github.io/mturk/unique_objects/obj121.png" style="position:absolute;display:none"><img id="obj122" src="https://paulscotti.github.io/mturk/unique_objects/obj122.png" style="position:absolute;display:none"><img id="obj123" src="https://paulscotti.github.io/mturk/unique_objects/obj123.png" style="position:absolute;display:none"><img id="obj124" src="https://paulscotti.github.io/mturk/unique_objects/obj124.png" style="position:absolute;display:none"><img id="obj125" src="https://paulscotti.github.io/mturk/unique_objects/obj125.png" style="position:absolute;display:none"><img id="obj126" src="https://paulscotti.github.io/mturk/unique_objects/obj126.png" style="position:absolute;display:none"><img id="obj127" src="https://paulscotti.github.io/mturk/unique_objects/obj127.png" style="position:absolute;display:none"><img id="obj128" src="https://paulscotti.github.io/mturk/unique_objects/obj128.png" style="position:absolute;display:none"><img id="obj129" src="https://paulscotti.github.io/mturk/unique_objects/obj129.png" style="position:absolute;display:none"><img id="obj13" src="https://paulscotti.github.io/mturk/unique_objects/obj13.png" style="position:absolute;display:none"><img id="obj130" src="https://paulscotti.github.io/mturk/unique_objects/obj130.png" style="position:absolute;display:none"><img id="obj131" src="https://paulscotti.github.io/mturk/unique_objects/obj131.png" style="position:absolute;display:none"><img id="obj132" src="https://paulscotti.github.io/mturk/unique_objects/obj132.png" style="position:absolute;display:none"><img id="obj133" src="https://paulscotti.github.io/mturk/unique_objects/obj133.png" style="position:absolute;display:none"><img id="obj134" src="https://paulscotti.github.io/mturk/unique_objects/obj134.png" style="position:absolute;display:none"><img id="obj135" src="https://paulscotti.github.io/mturk/unique_objects/obj135.png" style="position:absolute;display:none"><img id="obj136" src="https://paulscotti.github.io/mturk/unique_objects/obj136.png" style="position:absolute;display:none"><img id="obj137" src="https://paulscotti.github.io/mturk/unique_objects/obj137.png" style="position:absolute;display:none"><img id="obj138" src="https://paulscotti.github.io/mturk/unique_objects/obj138.png" style="position:absolute;display:none"><img id="obj139" src="https://paulscotti.github.io/mturk/unique_objects/obj139.png" style="position:absolute;display:none"><img id="obj14" src="https://paulscotti.github.io/mturk/unique_objects/obj14.png" style="position:absolute;display:none"><img id="obj140" src="https://paulscotti.github.io/mturk/unique_objects/obj140.png" style="position:absolute;display:none"><img id="obj141" src="https://paulscotti.github.io/mturk/unique_objects/obj141.png" style="position:absolute;display:none"><img id="obj142" src="https://paulscotti.github.io/mturk/unique_objects/obj142.png" style="position:absolute;display:none"><img id="obj143" src="https://paulscotti.github.io/mturk/unique_objects/obj143.png" style="position:absolute;display:none"><img id="obj144" src="https://paulscotti.github.io/mturk/unique_objects/obj144.png" style="position:absolute;display:none"><img id="obj145" src="https://paulscotti.github.io/mturk/unique_objects/obj145.png" style="position:absolute;display:none"><img id="obj146" src="https://paulscotti.github.io/mturk/unique_objects/obj146.png" style="position:absolute;display:none"><img id="obj147" src="https://paulscotti.github.io/mturk/unique_objects/obj147.png" style="position:absolute;display:none"><img id="obj148" src="https://paulscotti.github.io/mturk/unique_objects/obj148.png" style="position:absolute;display:none"><img id="obj149" src="https://paulscotti.github.io/mturk/unique_objects/obj149.png" style="position:absolute;display:none"><img id="obj15" src="https://paulscotti.github.io/mturk/unique_objects/obj15.png" style="position:absolute;display:none"><img id="obj150" src="https://paulscotti.github.io/mturk/unique_objects/obj150.png" style="position:absolute;display:none"><img id="obj151" src="https://paulscotti.github.io/mturk/unique_objects/obj151.png" style="position:absolute;display:none"><img id="obj152" src="https://paulscotti.github.io/mturk/unique_objects/obj152.png" style="position:absolute;display:none"><img id="obj153" src="https://paulscotti.github.io/mturk/unique_objects/obj153.png" style="position:absolute;display:none"><img id="obj154" src="https://paulscotti.github.io/mturk/unique_objects/obj154.png" style="position:absolute;display:none"><img id="obj155" src="https://paulscotti.github.io/mturk/unique_objects/obj155.png" style="position:absolute;display:none"><img id="obj156" src="https://paulscotti.github.io/mturk/unique_objects/obj156.png" style="position:absolute;display:none"><img id="obj157" src="https://paulscotti.github.io/mturk/unique_objects/obj157.png" style="position:absolute;display:none"><img id="obj158" src="https://paulscotti.github.io/mturk/unique_objects/obj158.png" style="position:absolute;display:none"><img id="obj159" src="https://paulscotti.github.io/mturk/unique_objects/obj159.png" style="position:absolute;display:none"><img id="obj16" src="https://paulscotti.github.io/mturk/unique_objects/obj16.png" style="position:absolute;display:none"><img id="obj160" src="https://paulscotti.github.io/mturk/unique_objects/obj160.png" style="position:absolute;display:none"><img id="obj161" src="https://paulscotti.github.io/mturk/unique_objects/obj161.png" style="position:absolute;display:none"><img id="obj162" src="https://paulscotti.github.io/mturk/unique_objects/obj162.png" style="position:absolute;display:none"><img id="obj163" src="https://paulscotti.github.io/mturk/unique_objects/obj163.png" style="position:absolute;display:none"><img id="obj164" src="https://paulscotti.github.io/mturk/unique_objects/obj164.png" style="position:absolute;display:none"><img id="obj165" src="https://paulscotti.github.io/mturk/unique_objects/obj165.png" style="position:absolute;display:none"><img id="obj166" src="https://paulscotti.github.io/mturk/unique_objects/obj166.png" style="position:absolute;display:none"><img id="obj167" src="https://paulscotti.github.io/mturk/unique_objects/obj167.png" style="position:absolute;display:none"><img id="obj168" src="https://paulscotti.github.io/mturk/unique_objects/obj168.png" style="position:absolute;display:none"><img id="obj169" src="https://paulscotti.github.io/mturk/unique_objects/obj169.png" style="position:absolute;display:none"><img id="obj17" src="https://paulscotti.github.io/mturk/unique_objects/obj17.png" style="position:absolute;display:none"><img id="obj170" src="https://paulscotti.github.io/mturk/unique_objects/obj170.png" style="position:absolute;display:none"><img id="obj171" src="https://paulscotti.github.io/mturk/unique_objects/obj171.png" style="position:absolute;display:none"><img id="obj172" src="https://paulscotti.github.io/mturk/unique_objects/obj172.png" style="position:absolute;display:none"><img id="obj173" src="https://paulscotti.github.io/mturk/unique_objects/obj173.png" style="position:absolute;display:none"><img id="obj174" src="https://paulscotti.github.io/mturk/unique_objects/obj174.png" style="position:absolute;display:none"><img id="obj175" src="https://paulscotti.github.io/mturk/unique_objects/obj175.png" style="position:absolute;display:none"><img id="obj176" src="https://paulscotti.github.io/mturk/unique_objects/obj176.png" style="position:absolute;display:none"><img id="obj177" src="https://paulscotti.github.io/mturk/unique_objects/obj177.png" style="position:absolute;display:none"><img id="obj178" src="https://paulscotti.github.io/mturk/unique_objects/obj178.png" style="position:absolute;display:none"><img id="obj179" src="https://paulscotti.github.io/mturk/unique_objects/obj179.png" style="position:absolute;display:none"><img id="obj18" src="https://paulscotti.github.io/mturk/unique_objects/obj18.png" style="position:absolute;display:none"><img id="obj180" src="https://paulscotti.github.io/mturk/unique_objects/obj180.png" style="position:absolute;display:none"><img id="obj181" src="https://paulscotti.github.io/mturk/unique_objects/obj181.png" style="position:absolute;display:none"><img id="obj182" src="https://paulscotti.github.io/mturk/unique_objects/obj182.png" style="position:absolute;display:none"><img id="obj183" src="https://paulscotti.github.io/mturk/unique_objects/obj183.png" style="position:absolute;display:none"><img id="obj184" src="https://paulscotti.github.io/mturk/unique_objects/obj184.png" style="position:absolute;display:none"><img id="obj185" src="https://paulscotti.github.io/mturk/unique_objects/obj185.png" style="position:absolute;display:none"><img id="obj186" src="https://paulscotti.github.io/mturk/unique_objects/obj186.png" style="position:absolute;display:none"><img id="obj187" src="https://paulscotti.github.io/mturk/unique_objects/obj187.png" style="position:absolute;display:none"><img id="obj188" src="https://paulscotti.github.io/mturk/unique_objects/obj188.png" style="position:absolute;display:none"><img id="obj189" src="https://paulscotti.github.io/mturk/unique_objects/obj189.png" style="position:absolute;display:none"><img id="obj19" src="https://paulscotti.github.io/mturk/unique_objects/obj19.png" style="position:absolute;display:none"><img id="obj190" src="https://paulscotti.github.io/mturk/unique_objects/obj190.png" style="position:absolute;display:none"><img id="obj191" src="https://paulscotti.github.io/mturk/unique_objects/obj191.png" style="position:absolute;display:none"><img id="obj192" src="https://paulscotti.github.io/mturk/unique_objects/obj192.png" style="position:absolute;display:none"><img id="obj193" src="https://paulscotti.github.io/mturk/unique_objects/obj193.png" style="position:absolute;display:none"><img id="obj194" src="https://paulscotti.github.io/mturk/unique_objects/obj194.png" style="position:absolute;display:none"><img id="obj195" src="https://paulscotti.github.io/mturk/unique_objects/obj195.png" style="position:absolute;display:none"><img id="obj196" src="https://paulscotti.github.io/mturk/unique_objects/obj196.png" style="position:absolute;display:none"><img id="obj197" src="https://paulscotti.github.io/mturk/unique_objects/obj197.png" style="position:absolute;display:none"><img id="obj198" src="https://paulscotti.github.io/mturk/unique_objects/obj198.png" style="position:absolute;display:none"><img id="obj199" src="https://paulscotti.github.io/mturk/unique_objects/obj199.png" style="position:absolute;display:none"><img id="obj2" src="https://paulscotti.github.io/mturk/unique_objects/obj2.png" style="position:absolute;display:none"><img id="obj20" src="https://paulscotti.github.io/mturk/unique_objects/obj20.png" style="position:absolute;display:none"><img id="obj21" src="https://paulscotti.github.io/mturk/unique_objects/obj21.png" style="position:absolute;display:none"><img id="obj22" src="https://paulscotti.github.io/mturk/unique_objects/obj22.png" style="position:absolute;display:none"><img id="obj23" src="https://paulscotti.github.io/mturk/unique_objects/obj23.png" style="position:absolute;display:none"><img id="obj24" src="https://paulscotti.github.io/mturk/unique_objects/obj24.png" style="position:absolute;display:none"><img id="obj25" src="https://paulscotti.github.io/mturk/unique_objects/obj25.png" style="position:absolute;display:none"><img id="obj26" src="https://paulscotti.github.io/mturk/unique_objects/obj26.png" style="position:absolute;display:none"><img id="obj27" src="https://paulscotti.github.io/mturk/unique_objects/obj27.png" style="position:absolute;display:none"><img id="obj28" src="https://paulscotti.github.io/mturk/unique_objects/obj28.png" style="position:absolute;display:none"><img id="obj29" src="https://paulscotti.github.io/mturk/unique_objects/obj29.png" style="position:absolute;display:none"><img id="obj3" src="https://paulscotti.github.io/mturk/unique_objects/obj3.png" style="position:absolute;display:none"><img id="obj30" src="https://paulscotti.github.io/mturk/unique_objects/obj30.png" style="position:absolute;display:none"><img id="obj31" src="https://paulscotti.github.io/mturk/unique_objects/obj31.png" style="position:absolute;display:none"><img id="obj32" src="https://paulscotti.github.io/mturk/unique_objects/obj32.png" style="position:absolute;display:none"><img id="obj33" src="https://paulscotti.github.io/mturk/unique_objects/obj33.png" style="position:absolute;display:none"><img id="obj34" src="https://paulscotti.github.io/mturk/unique_objects/obj34.png" style="position:absolute;display:none"><img id="obj35" src="https://paulscotti.github.io/mturk/unique_objects/obj35.png" style="position:absolute;display:none"><img id="obj36" src="https://paulscotti.github.io/mturk/unique_objects/obj36.png" style="position:absolute;display:none"><img id="obj37" src="https://paulscotti.github.io/mturk/unique_objects/obj37.png" style="position:absolute;display:none"><img id="obj38" src="https://paulscotti.github.io/mturk/unique_objects/obj38.png" style="position:absolute;display:none"><img id="obj39" src="https://paulscotti.github.io/mturk/unique_objects/obj39.png" style="position:absolute;display:none"><img id="obj4" src="https://paulscotti.github.io/mturk/unique_objects/obj4.png" style="position:absolute;display:none"><img id="obj40" src="https://paulscotti.github.io/mturk/unique_objects/obj40.png" style="position:absolute;display:none"><img id="obj41" src="https://paulscotti.github.io/mturk/unique_objects/obj41.png" style="position:absolute;display:none"><img id="obj42" src="https://paulscotti.github.io/mturk/unique_objects/obj42.png" style="position:absolute;display:none"><img id="obj43" src="https://paulscotti.github.io/mturk/unique_objects/obj43.png" style="position:absolute;display:none"><img id="obj44" src="https://paulscotti.github.io/mturk/unique_objects/obj44.png" style="position:absolute;display:none"><img id="obj45" src="https://paulscotti.github.io/mturk/unique_objects/obj45.png" style="position:absolute;display:none"><img id="obj46" src="https://paulscotti.github.io/mturk/unique_objects/obj46.png" style="position:absolute;display:none"><img id="obj47" src="https://paulscotti.github.io/mturk/unique_objects/obj47.png" style="position:absolute;display:none"><img id="obj48" src="https://paulscotti.github.io/mturk/unique_objects/obj48.png" style="position:absolute;display:none"><img id="obj49" src="https://paulscotti.github.io/mturk/unique_objects/obj49.png" style="position:absolute;display:none"><img id="obj5" src="https://paulscotti.github.io/mturk/unique_objects/obj5.png" style="position:absolute;display:none"><img id="obj50" src="https://paulscotti.github.io/mturk/unique_objects/obj50.png" style="position:absolute;display:none"><img id="obj51" src="https://paulscotti.github.io/mturk/unique_objects/obj51.png" style="position:absolute;display:none"><img id="obj52" src="https://paulscotti.github.io/mturk/unique_objects/obj52.png" style="position:absolute;display:none"><img id="obj53" src="https://paulscotti.github.io/mturk/unique_objects/obj53.png" style="position:absolute;display:none"><img id="obj54" src="https://paulscotti.github.io/mturk/unique_objects/obj54.png" style="position:absolute;display:none"><img id="obj55" src="https://paulscotti.github.io/mturk/unique_objects/obj55.png" style="position:absolute;display:none"><img id="obj56" src="https://paulscotti.github.io/mturk/unique_objects/obj56.png" style="position:absolute;display:none"><img id="obj57" src="https://paulscotti.github.io/mturk/unique_objects/obj57.png" style="position:absolute;display:none"><img id="obj58" src="https://paulscotti.github.io/mturk/unique_objects/obj58.png" style="position:absolute;display:none"><img id="obj59" src="https://paulscotti.github.io/mturk/unique_objects/obj59.png" style="position:absolute;display:none"><img id="obj6" src="https://paulscotti.github.io/mturk/unique_objects/obj6.png" style="position:absolute;display:none"><img id="obj60" src="https://paulscotti.github.io/mturk/unique_objects/obj60.png" style="position:absolute;display:none"><img id="obj61" src="https://paulscotti.github.io/mturk/unique_objects/obj61.png" style="position:absolute;display:none"><img id="obj62" src="https://paulscotti.github.io/mturk/unique_objects/obj62.png" style="position:absolute;display:none"><img id="obj63" src="https://paulscotti.github.io/mturk/unique_objects/obj63.png" style="position:absolute;display:none"><img id="obj64" src="https://paulscotti.github.io/mturk/unique_objects/obj64.png" style="position:absolute;display:none"><img id="obj65" src="https://paulscotti.github.io/mturk/unique_objects/obj65.png" style="position:absolute;display:none"><img id="obj66" src="https://paulscotti.github.io/mturk/unique_objects/obj66.png" style="position:absolute;display:none"><img id="obj67" src="https://paulscotti.github.io/mturk/unique_objects/obj67.png" style="position:absolute;display:none"><img id="obj68" src="https://paulscotti.github.io/mturk/unique_objects/obj68.png" style="position:absolute;display:none"><img id="obj69" src="https://paulscotti.github.io/mturk/unique_objects/obj69.png" style="position:absolute;display:none"><img id="obj7" src="https://paulscotti.github.io/mturk/unique_objects/obj7.png" style="position:absolute;display:none"><img id="obj70" src="https://paulscotti.github.io/mturk/unique_objects/obj70.png" style="position:absolute;display:none"><img id="obj71" src="https://paulscotti.github.io/mturk/unique_objects/obj71.png" style="position:absolute;display:none"><img id="obj72" src="https://paulscotti.github.io/mturk/unique_objects/obj72.png" style="position:absolute;display:none"><img id="obj73" src="https://paulscotti.github.io/mturk/unique_objects/obj73.png" style="position:absolute;display:none"><img id="obj74" src="https://paulscotti.github.io/mturk/unique_objects/obj74.png" style="position:absolute;display:none"><img id="obj75" src="https://paulscotti.github.io/mturk/unique_objects/obj75.png" style="position:absolute;display:none"><img id="obj76" src="https://paulscotti.github.io/mturk/unique_objects/obj76.png" style="position:absolute;display:none"><img id="obj77" src="https://paulscotti.github.io/mturk/unique_objects/obj77.png" style="position:absolute;display:none"><img id="obj78" src="https://paulscotti.github.io/mturk/unique_objects/obj78.png" style="position:absolute;display:none"><img id="obj79" src="https://paulscotti.github.io/mturk/unique_objects/obj79.png" style="position:absolute;display:none"><img id="obj8" src="https://paulscotti.github.io/mturk/unique_objects/obj8.png" style="position:absolute;display:none"><img id="obj80" src="https://paulscotti.github.io/mturk/unique_objects/obj80.png" style="position:absolute;display:none"><img id="obj81" src="https://paulscotti.github.io/mturk/unique_objects/obj81.png" style="position:absolute;display:none"><img id="obj82" src="https://paulscotti.github.io/mturk/unique_objects/obj82.png" style="position:absolute;display:none"><img id="obj83" src="https://paulscotti.github.io/mturk/unique_objects/obj83.png" style="position:absolute;display:none"><img id="obj84" src="https://paulscotti.github.io/mturk/unique_objects/obj84.png" style="position:absolute;display:none"><img id="obj85" src="https://paulscotti.github.io/mturk/unique_objects/obj85.png" style="position:absolute;display:none"><img id="obj86" src="https://paulscotti.github.io/mturk/unique_objects/obj86.png" style="position:absolute;display:none"><img id="obj87" src="https://paulscotti.github.io/mturk/unique_objects/obj87.png" style="position:absolute;display:none"><img id="obj88" src="https://paulscotti.github.io/mturk/unique_objects/obj88.png" style="position:absolute;display:none"><img id="obj89" src="https://paulscotti.github.io/mturk/unique_objects/obj89.png" style="position:absolute;display:none"><img id="obj9" src="https://paulscotti.github.io/mturk/unique_objects/obj9.png" style="position:absolute;display:none"><img id="obj90" src="https://paulscotti.github.io/mturk/unique_objects/obj90.png" style="position:absolute;display:none"><img id="obj91" src="https://paulscotti.github.io/mturk/unique_objects/obj91.png" style="position:absolute;display:none"><img id="obj92" src="https://paulscotti.github.io/mturk/unique_objects/obj92.png" style="position:absolute;display:none"><img id="obj93" src="https://paulscotti.github.io/mturk/unique_objects/obj93.png" style="position:absolute;display:none"><img id="obj94" src="https://paulscotti.github.io/mturk/unique_objects/obj94.png" style="position:absolute;display:none"><img id="obj95" src="https://paulscotti.github.io/mturk/unique_objects/obj95.png" style="position:absolute;display:none"><img id="obj96" src="https://paulscotti.github.io/mturk/unique_objects/obj96.png" style="position:absolute;display:none"><img id="obj97" src="https://paulscotti.github.io/mturk/unique_objects/obj97.png" style="position:absolute;display:none"><img id="obj98" src="https://paulscotti.github.io/mturk/unique_objects/obj98.png" style="position:absolute;display:none"><img id="obj99" src="https://paulscotti.github.io/mturk/unique_objects/obj99.png" style="position:absolute;display:none">')
    document.write('<img id="scene0" src="https://paulscotti.github.io/mturk/unique_scenes/scene0.jpg" style="position:absolute;display:none"><img id="scene1" src="https://paulscotti.github.io/mturk/unique_scenes/scene1.jpg" style="position:absolute;display:none"><img id="scene10" src="https://paulscotti.github.io/mturk/unique_scenes/scene10.jpg" style="position:absolute;display:none"><img id="scene100" src="https://paulscotti.github.io/mturk/unique_scenes/scene100.jpg" style="position:absolute;display:none"><img id="scene101" src="https://paulscotti.github.io/mturk/unique_scenes/scene101.jpg" style="position:absolute;display:none"><img id="scene102" src="https://paulscotti.github.io/mturk/unique_scenes/scene102.jpg" style="position:absolute;display:none"><img id="scene103" src="https://paulscotti.github.io/mturk/unique_scenes/scene103.jpg" style="position:absolute;display:none"><img id="scene104" src="https://paulscotti.github.io/mturk/unique_scenes/scene104.jpg" style="position:absolute;display:none"><img id="scene105" src="https://paulscotti.github.io/mturk/unique_scenes/scene105.jpg" style="position:absolute;display:none"><img id="scene106" src="https://paulscotti.github.io/mturk/unique_scenes/scene106.jpg" style="position:absolute;display:none"><img id="scene107" src="https://paulscotti.github.io/mturk/unique_scenes/scene107.jpg" style="position:absolute;display:none"><img id="scene108" src="https://paulscotti.github.io/mturk/unique_scenes/scene108.jpg" style="position:absolute;display:none"><img id="scene109" src="https://paulscotti.github.io/mturk/unique_scenes/scene109.jpg" style="position:absolute;display:none"><img id="scene11" src="https://paulscotti.github.io/mturk/unique_scenes/scene11.jpg" style="position:absolute;display:none"><img id="scene110" src="https://paulscotti.github.io/mturk/unique_scenes/scene110.jpg" style="position:absolute;display:none"><img id="scene111" src="https://paulscotti.github.io/mturk/unique_scenes/scene111.jpg" style="position:absolute;display:none"><img id="scene112" src="https://paulscotti.github.io/mturk/unique_scenes/scene112.jpg" style="position:absolute;display:none"><img id="scene113" src="https://paulscotti.github.io/mturk/unique_scenes/scene113.jpg" style="position:absolute;display:none"><img id="scene114" src="https://paulscotti.github.io/mturk/unique_scenes/scene114.jpg" style="position:absolute;display:none"><img id="scene115" src="https://paulscotti.github.io/mturk/unique_scenes/scene115.jpg" style="position:absolute;display:none"><img id="scene116" src="https://paulscotti.github.io/mturk/unique_scenes/scene116.jpg" style="position:absolute;display:none"><img id="scene117" src="https://paulscotti.github.io/mturk/unique_scenes/scene117.jpg" style="position:absolute;display:none"><img id="scene118" src="https://paulscotti.github.io/mturk/unique_scenes/scene118.jpg" style="position:absolute;display:none"><img id="scene119" src="https://paulscotti.github.io/mturk/unique_scenes/scene119.jpg" style="position:absolute;display:none"><img id="scene12" src="https://paulscotti.github.io/mturk/unique_scenes/scene12.jpg" style="position:absolute;display:none"><img id="scene120" src="https://paulscotti.github.io/mturk/unique_scenes/scene120.jpg" style="position:absolute;display:none"><img id="scene121" src="https://paulscotti.github.io/mturk/unique_scenes/scene121.jpg" style="position:absolute;display:none"><img id="scene122" src="https://paulscotti.github.io/mturk/unique_scenes/scene122.jpg" style="position:absolute;display:none"><img id="scene123" src="https://paulscotti.github.io/mturk/unique_scenes/scene123.jpg" style="position:absolute;display:none"><img id="scene124" src="https://paulscotti.github.io/mturk/unique_scenes/scene124.jpg" style="position:absolute;display:none"><img id="scene125" src="https://paulscotti.github.io/mturk/unique_scenes/scene125.jpg" style="position:absolute;display:none"><img id="scene126" src="https://paulscotti.github.io/mturk/unique_scenes/scene126.jpg" style="position:absolute;display:none"><img id="scene127" src="https://paulscotti.github.io/mturk/unique_scenes/scene127.jpg" style="position:absolute;display:none"><img id="scene128" src="https://paulscotti.github.io/mturk/unique_scenes/scene128.jpg" style="position:absolute;display:none"><img id="scene129" src="https://paulscotti.github.io/mturk/unique_scenes/scene129.jpg" style="position:absolute;display:none"><img id="scene13" src="https://paulscotti.github.io/mturk/unique_scenes/scene13.jpg" style="position:absolute;display:none"><img id="scene14" src="https://paulscotti.github.io/mturk/unique_scenes/scene14.jpg" style="position:absolute;display:none"><img id="scene15" src="https://paulscotti.github.io/mturk/unique_scenes/scene15.jpg" style="position:absolute;display:none"><img id="scene16" src="https://paulscotti.github.io/mturk/unique_scenes/scene16.jpg" style="position:absolute;display:none"><img id="scene17" src="https://paulscotti.github.io/mturk/unique_scenes/scene17.jpg" style="position:absolute;display:none"><img id="scene18" src="https://paulscotti.github.io/mturk/unique_scenes/scene18.jpg" style="position:absolute;display:none"><img id="scene19" src="https://paulscotti.github.io/mturk/unique_scenes/scene19.jpg" style="position:absolute;display:none"><img id="scene2" src="https://paulscotti.github.io/mturk/unique_scenes/scene2.jpg" style="position:absolute;display:none"><img id="scene20" src="https://paulscotti.github.io/mturk/unique_scenes/scene20.jpg" style="position:absolute;display:none"><img id="scene21" src="https://paulscotti.github.io/mturk/unique_scenes/scene21.jpg" style="position:absolute;display:none"><img id="scene22" src="https://paulscotti.github.io/mturk/unique_scenes/scene22.jpg" style="position:absolute;display:none"><img id="scene23" src="https://paulscotti.github.io/mturk/unique_scenes/scene23.jpg" style="position:absolute;display:none"><img id="scene24" src="https://paulscotti.github.io/mturk/unique_scenes/scene24.jpg" style="position:absolute;display:none"><img id="scene25" src="https://paulscotti.github.io/mturk/unique_scenes/scene25.jpg" style="position:absolute;display:none"><img id="scene26" src="https://paulscotti.github.io/mturk/unique_scenes/scene26.jpg" style="position:absolute;display:none"><img id="scene27" src="https://paulscotti.github.io/mturk/unique_scenes/scene27.jpg" style="position:absolute;display:none"><img id="scene28" src="https://paulscotti.github.io/mturk/unique_scenes/scene28.jpg" style="position:absolute;display:none"><img id="scene29" src="https://paulscotti.github.io/mturk/unique_scenes/scene29.jpg" style="position:absolute;display:none"><img id="scene3" src="https://paulscotti.github.io/mturk/unique_scenes/scene3.jpg" style="position:absolute;display:none"><img id="scene30" src="https://paulscotti.github.io/mturk/unique_scenes/scene30.jpg" style="position:absolute;display:none"><img id="scene31" src="https://paulscotti.github.io/mturk/unique_scenes/scene31.jpg" style="position:absolute;display:none"><img id="scene32" src="https://paulscotti.github.io/mturk/unique_scenes/scene32.jpg" style="position:absolute;display:none"><img id="scene33" src="https://paulscotti.github.io/mturk/unique_scenes/scene33.jpg" style="position:absolute;display:none"><img id="scene34" src="https://paulscotti.github.io/mturk/unique_scenes/scene34.jpg" style="position:absolute;display:none"><img id="scene35" src="https://paulscotti.github.io/mturk/unique_scenes/scene35.jpg" style="position:absolute;display:none"><img id="scene36" src="https://paulscotti.github.io/mturk/unique_scenes/scene36.jpg" style="position:absolute;display:none"><img id="scene37" src="https://paulscotti.github.io/mturk/unique_scenes/scene37.jpg" style="position:absolute;display:none"><img id="scene38" src="https://paulscotti.github.io/mturk/unique_scenes/scene38.jpg" style="position:absolute;display:none"><img id="scene39" src="https://paulscotti.github.io/mturk/unique_scenes/scene39.jpg" style="position:absolute;display:none"><img id="scene4" src="https://paulscotti.github.io/mturk/unique_scenes/scene4.jpg" style="position:absolute;display:none"><img id="scene40" src="https://paulscotti.github.io/mturk/unique_scenes/scene40.jpg" style="position:absolute;display:none"><img id="scene41" src="https://paulscotti.github.io/mturk/unique_scenes/scene41.jpg" style="position:absolute;display:none"><img id="scene42" src="https://paulscotti.github.io/mturk/unique_scenes/scene42.jpg" style="position:absolute;display:none"><img id="scene43" src="https://paulscotti.github.io/mturk/unique_scenes/scene43.jpg" style="position:absolute;display:none"><img id="scene44" src="https://paulscotti.github.io/mturk/unique_scenes/scene44.jpg" style="position:absolute;display:none"><img id="scene45" src="https://paulscotti.github.io/mturk/unique_scenes/scene45.jpg" style="position:absolute;display:none"><img id="scene46" src="https://paulscotti.github.io/mturk/unique_scenes/scene46.jpg" style="position:absolute;display:none"><img id="scene47" src="https://paulscotti.github.io/mturk/unique_scenes/scene47.jpg" style="position:absolute;display:none"><img id="scene48" src="https://paulscotti.github.io/mturk/unique_scenes/scene48.jpg" style="position:absolute;display:none"><img id="scene49" src="https://paulscotti.github.io/mturk/unique_scenes/scene49.jpg" style="position:absolute;display:none"><img id="scene5" src="https://paulscotti.github.io/mturk/unique_scenes/scene5.jpg" style="position:absolute;display:none"><img id="scene50" src="https://paulscotti.github.io/mturk/unique_scenes/scene50.jpg" style="position:absolute;display:none"><img id="scene51" src="https://paulscotti.github.io/mturk/unique_scenes/scene51.jpg" style="position:absolute;display:none"><img id="scene52" src="https://paulscotti.github.io/mturk/unique_scenes/scene52.jpg" style="position:absolute;display:none"><img id="scene53" src="https://paulscotti.github.io/mturk/unique_scenes/scene53.jpg" style="position:absolute;display:none"><img id="scene54" src="https://paulscotti.github.io/mturk/unique_scenes/scene54.jpg" style="position:absolute;display:none"><img id="scene55" src="https://paulscotti.github.io/mturk/unique_scenes/scene55.jpg" style="position:absolute;display:none"><img id="scene56" src="https://paulscotti.github.io/mturk/unique_scenes/scene56.jpg" style="position:absolute;display:none"><img id="scene57" src="https://paulscotti.github.io/mturk/unique_scenes/scene57.jpg" style="position:absolute;display:none"><img id="scene58" src="https://paulscotti.github.io/mturk/unique_scenes/scene58.jpg" style="position:absolute;display:none"><img id="scene59" src="https://paulscotti.github.io/mturk/unique_scenes/scene59.jpg" style="position:absolute;display:none"><img id="scene6" src="https://paulscotti.github.io/mturk/unique_scenes/scene6.jpg" style="position:absolute;display:none"><img id="scene60" src="https://paulscotti.github.io/mturk/unique_scenes/scene60.jpg" style="position:absolute;display:none"><img id="scene61" src="https://paulscotti.github.io/mturk/unique_scenes/scene61.jpg" style="position:absolute;display:none"><img id="scene62" src="https://paulscotti.github.io/mturk/unique_scenes/scene62.jpg" style="position:absolute;display:none"><img id="scene63" src="https://paulscotti.github.io/mturk/unique_scenes/scene63.jpg" style="position:absolute;display:none"><img id="scene64" src="https://paulscotti.github.io/mturk/unique_scenes/scene64.jpg" style="position:absolute;display:none"><img id="scene65" src="https://paulscotti.github.io/mturk/unique_scenes/scene65.jpg" style="position:absolute;display:none"><img id="scene66" src="https://paulscotti.github.io/mturk/unique_scenes/scene66.jpg" style="position:absolute;display:none"><img id="scene67" src="https://paulscotti.github.io/mturk/unique_scenes/scene67.jpg" style="position:absolute;display:none"><img id="scene68" src="https://paulscotti.github.io/mturk/unique_scenes/scene68.jpg" style="position:absolute;display:none"><img id="scene69" src="https://paulscotti.github.io/mturk/unique_scenes/scene69.jpg" style="position:absolute;display:none"><img id="scene7" src="https://paulscotti.github.io/mturk/unique_scenes/scene7.jpg" style="position:absolute;display:none"><img id="scene70" src="https://paulscotti.github.io/mturk/unique_scenes/scene70.jpg" style="position:absolute;display:none"><img id="scene71" src="https://paulscotti.github.io/mturk/unique_scenes/scene71.jpg" style="position:absolute;display:none"><img id="scene72" src="https://paulscotti.github.io/mturk/unique_scenes/scene72.jpg" style="position:absolute;display:none"><img id="scene73" src="https://paulscotti.github.io/mturk/unique_scenes/scene73.jpg" style="position:absolute;display:none"><img id="scene74" src="https://paulscotti.github.io/mturk/unique_scenes/scene74.jpg" style="position:absolute;display:none"><img id="scene75" src="https://paulscotti.github.io/mturk/unique_scenes/scene75.jpg" style="position:absolute;display:none"><img id="scene76" src="https://paulscotti.github.io/mturk/unique_scenes/scene76.jpg" style="position:absolute;display:none"><img id="scene77" src="https://paulscotti.github.io/mturk/unique_scenes/scene77.jpg" style="position:absolute;display:none"><img id="scene78" src="https://paulscotti.github.io/mturk/unique_scenes/scene78.jpg" style="position:absolute;display:none"><img id="scene79" src="https://paulscotti.github.io/mturk/unique_scenes/scene79.jpg" style="position:absolute;display:none"><img id="scene8" src="https://paulscotti.github.io/mturk/unique_scenes/scene8.jpg" style="position:absolute;display:none"><img id="scene80" src="https://paulscotti.github.io/mturk/unique_scenes/scene80.jpg" style="position:absolute;display:none"><img id="scene81" src="https://paulscotti.github.io/mturk/unique_scenes/scene81.jpg" style="position:absolute;display:none"><img id="scene82" src="https://paulscotti.github.io/mturk/unique_scenes/scene82.jpg" style="position:absolute;display:none"><img id="scene83" src="https://paulscotti.github.io/mturk/unique_scenes/scene83.jpg" style="position:absolute;display:none"><img id="scene84" src="https://paulscotti.github.io/mturk/unique_scenes/scene84.jpg" style="position:absolute;display:none"><img id="scene85" src="https://paulscotti.github.io/mturk/unique_scenes/scene85.jpg" style="position:absolute;display:none"><img id="scene86" src="https://paulscotti.github.io/mturk/unique_scenes/scene86.jpg" style="position:absolute;display:none"><img id="scene87" src="https://paulscotti.github.io/mturk/unique_scenes/scene87.jpg" style="position:absolute;display:none"><img id="scene88" src="https://paulscotti.github.io/mturk/unique_scenes/scene88.jpg" style="position:absolute;display:none"><img id="scene89" src="https://paulscotti.github.io/mturk/unique_scenes/scene89.jpg" style="position:absolute;display:none"><img id="scene9" src="https://paulscotti.github.io/mturk/unique_scenes/scene9.jpg" style="position:absolute;display:none"><img id="scene90" src="https://paulscotti.github.io/mturk/unique_scenes/scene90.jpg" style="position:absolute;display:none"><img id="scene91" src="https://paulscotti.github.io/mturk/unique_scenes/scene91.jpg" style="position:absolute;display:none"><img id="scene92" src="https://paulscotti.github.io/mturk/unique_scenes/scene92.jpg" style="position:absolute;display:none"><img id="scene93" src="https://paulscotti.github.io/mturk/unique_scenes/scene93.jpg" style="position:absolute;display:none"><img id="scene94" src="https://paulscotti.github.io/mturk/unique_scenes/scene94.jpg" style="position:absolute;display:none"><img id="scene95" src="https://paulscotti.github.io/mturk/unique_scenes/scene95.jpg" style="position:absolute;display:none"><img id="scene96" src="https://paulscotti.github.io/mturk/unique_scenes/scene96.jpg" style="position:absolute;display:none"><img id="scene97" src="https://paulscotti.github.io/mturk/unique_scenes/scene97.jpg" style="position:absolute;display:none"><img id="scene98" src="https://paulscotti.github.io/mturk/unique_scenes/scene98.jpg" style="position:absolute;display:none"><img id="scene99" src="https://paulscotti.github.io/mturk/unique_scenes/scene99.jpg" style="position:absolute;display:none">')
  </script>
</head>

<body>
  <!-- Consent statement: -->
  <div id="consentDiv"><center><h1>Princeton University Consent to Participate in Research</h1><p><b>This is a consent form for research participation.</b> It contains important information about this study and what to expect if you decide to participate.<br>If any questions arise, please contact scottibrain@gmail.com.</p>
    <iframe src="https://paulscotti.github.io/mturk/7137_consent.pdf" width="60%" height="500px"></iframe>
    <p><b>Electronic consent:</b> You may print a copy of this consent form for your records. If you wish to continue with the experiment, please click the button below.<br><br><b>Clicking the button below indicates that:</b><br>You have read the above information<br>You are 18 years of age or older<br>You voluntarily agree to participate<br></p></center><p style="text-align: center"><a href="javascript:void(0);" onclick="$('#consentDiv').hide();$('#info').show();document.body.scrollTop = document.documentElement.scrollTop = 0;" class="Button" style="display: inline;">I consent to participate in this study</a></p>
  </center></div>

  <!-- Subject info screen -->
  <div id="info" style='display:none; text-align: left; margin-left: 25%'>
    <h1>Subject Information</h1>
    Hello, before we begin please provide us with some information about yourself.
    <p>
    <!-- Full Name: <textarea id="name" style="width: 200px; height: 1.5rem"></textarea><br><br> -->
    <!-- Email (optional): <textarea id="email" style="width: 200px; height: 1.5rem"></textarea><br><br> -->
    Gender: <textarea id="gender" style="width: 100px; height: 1.5rem"></textarea><br><br>
    Age: <textarea id="age" style="width: 100px; height: 1.5rem"></textarea><br><br>
    Race (optional): <textarea id="race" style="width: 100px; height: 1.5rem"></textarea><br><br>
    Ethnicity (optional): Hispanic/Latino <input type="checkbox" id="hispanic"> &nbsp;&nbsp; Not Hispanic/Latino<input type="checkbox" id="nothispanic"><br><br>
    Normal or corrected-to-normal visual acuity? <input type="checkbox" id="acuity" checked><br><br>
    Normal color vision? <input type="checkbox" id="colorvision" checked><br><br>
    </p>
    <button class="Button" onclick="CheckInfo()">Continue</button>
  </div>

  <!-- Modal Pop-up Box -->
  <div id="openModal" class="modalDialog" style='display:none'>
    <div>
      <a href="#close" onclick="modalContinue();" title="Close" class="close">X</a>
      <p id="openModal_text">Hi!</p>
    </div>
  </div>
  <!-- Hidden MTurk forms sheet to submit expt upon completion -->
  <!-- <form name="turkSubmit" id="turkSubmit" action="https://www.mturk.com/mturk/externalSubmit" method="POST"> -->
  <!-- <input type="hidden" name="assignmentId" id="assignmentId" value="" > -->
  <!-- <input type="hidden" name="foo" value="" > -->
  <!-- <input type="submit" value="Submit" name="submitButton" id="submitButton" style="display: none"></form> -->

  <!-- Screen after submitting expt -->
  <div id="done" style='display:none; text-align: left; margin-left: 25%'>
    <div id="doneText">
    </div>
    <div>
        <a href="javascript:void(0);" onclick="SaveData()" class="Button">Click to Submit</a>
    </div>
    <iframe src="https://paulscotti.github.io/mturk/jglab_debrief.pdf" width="60%" height="500px"></iframe>
  </div>
  <div id="saving" style="display:none">Saving . . .</div>

  <!-- HTML Experiment Elements -->
  <div id="showTrial">
    <div id="fixation">+</div>
    <img id="item" src="https://maxceylab.github.io/stimuli/objects/Obj11_11.png"></img>
    <img id="itemL" src="https://maxceylab.github.io/stimuli/objects/Obj11_11.png"></img>
    <img id="itemR" src="https://maxceylab.github.io/stimuli/objects/Obj11_11.png" draggable="true"></img>
    <!-- <input type="range" oninput=setImage(this) min="0" max="119" value="0" id="slide"> -->
    <div class="circle_container">
      <div id='circle'>
        <div id='slider'></div>
      </div>
    </div>
    <div id="numbers">
      <p id="button_instruct">Which image was paired?<br>(Press the corresponding number button on your keyboard.)</p>
      <p class="number_buttons" id="button1">(1)Guess</p>
      <p class="number_buttons" id="button2">(2)Sure</p>
      <p class="number_buttons" id="button3">(3)Guess</p>
      <p class="number_buttons" id="button4">(4)Sure</p>
    </div>
    <div id="report_instruct">
      <p>What face was paired?<br>(Click the circle & rotate until you find the paired face, then click confirm.)</p>
    </div>
    <button class="Button" id="FaceConfirm" onclick="FaceConfirm()">Confirm</button>
    <p id='progress'></p>
  </div>
  <center><p id='loading'></p></center>
  <!-- <div id="buttonpressed">You pressed</p> -->

  <!-- Initializing JS -->
  <script>
    /* Disable context/right-click menu */
    document.oncontextmenu = function() {
        return false;
    }

    // set rng seed based on name
    const chance1 = Chance(WORKERID); 
    Math.seedrandom(chance1.seed); // Use current workerid as the shuffle seed, so you can trace back their trials

    /* Define variables */
    let modalClosed = false;
    var deg = 999;
    var deg_corr = 999;
    let curTrial = 0;
    let numTrials = 4;
    let curBlock = 0;
    let numBlocks = 10;
    let displayTime = 1000; //1000
    let isi1Time = 200;
    let isi2Time = 1200; //1200
    var keyCode = 0;
    var cur_button = 0;
    var phase1_faces = [];
    var phase1_associates = [];
    var phase2_faces = [];
    var phase2_orig = [];
    var phase2_resp = [];
    var phase3_faces = [];
    var phase3_orig = [];
    var phase3_lure = [];
    var phase3_accuracy = [];
    var phase3_rts = [];
    var scene_loops = 0;
    var phase4_faces = [];
    var phase4_associates = [];
    var phase5_faces = [];
    var phase5_orig = [];
    var phase5_lure = [];
    var phase5_accuracy = [];
    var phase5_rts = [];
    var obj_loops = 0;
    let start_time = 0;

    var face_order = derange(counter(0,39)) // 40 face triangles
    face_order = Array(40).fill(0) // TEMPORARY WHILE MAKING FACES
    var scene_order = derange(counter(0,119))
    var obj_order = derange(counter(0,119))

    // var faceAs = Array.from({length:numTrials/2}, () => randomInts(9,34))
    // var faceBs = Array.from({length:numTrials/2}, () => randomInts(54,79))
    // var AorB1 = Array(numTrialsPerBlock/2).fill(0).concat(Array(numTrialsPerBlock/2).fill(1))
    // var face_order1 = random.slice(curBlock*numTrialsPerBlock/2,curBlock*numTrialsPerBlock/2+numTrialsPerBlock/2)
    // face_order1 = face_order1.concat(face_order1)
    // sharedShuffleInPlace(AorB1,face_order1)
    // for (var index = 1; index < numStudyReps; index += 1) {
    //   p = permutation(numTrialsPerBlock)
    //   face_order = face_order1.concat(permute(face_order1,p))
    //   AorB = AorB1.concat(permute(AorB1,p))
    // }

    function StartExperiment() {
      if (IsOnTurk() && IsTurkPreview()) {
          alert("Please accept the HIT before continuing.");
          return false;
      }

      // open pop-up:
      modalClosed = false;
      $("#openModal").show()
      document.getElementById("openModal_text").innerHTML = 'Experiment will now begin. Memorize the faces and their associated image. Good luck!';
      window.location.href = '#openModal';
      checkFlag1();

      function checkFlag1() {
        if (modalClosed == false) {
          window.setTimeout(checkFlag1, 100); /* this checks the flag every 100 milliseconds*/
        } else {
          start_time = new Date();
          $('#progress').text("Trial "+(curTrial+1)+" of "+"x"+" (Block "+(curBlock+1)+" of "+numBlocks+")")
          console.log("start!")
          Phase1();
        }
      }
    }

    /* Phase 1: Face-Scene Study */
    function Phase1() {
      if (curTrial >= (numTrials)) { // if end of block
        console.log("End of Block.")
        $("#showTrial").hide()
        alert("End of Study Phase. Starting 2AFC task.")
        curTrial = 0;
        $('#progress').text("Trial "+(curTrial+1)+" of "+"x"+" (Block "+(curBlock+1)+" of "+numBlocks+")")

        p = permutation(face_order.length)
        face_order = permute(face_order,p)
        scene_order = permute(scene_order,p)
        obj_order = permute(obj_order,p)

        Phase2() // Continuous Face Report with scenes
      } else {
        $('#item').attr('src',$(window[face_order[curTrial]+'_'+20])[0].src).attr("src")
        $('#item').attr('style','display:inline')
        $('#showTrial').show();
        setTimeout(function() { // FACE displayTime
          $('#item').attr('style','display:none')
          $('#item').attr('src',$(window['scene'+scene_order[curTrial]])[0].src).attr("src")

          setTimeout(function() { // BLANK isi1Time
            $('#item').attr('style','display:inline')
            setTimeout(function() { // SCENE/OBJ displayTime
              $('#item').attr('style','display:none')
              setTimeout(function() { // BLANK isi2Time
                curTrial = curTrial + 1;
                $('#progress').text("Trial "+(curTrial+1)+" of "+"x"+" (Block "+(curBlock+1)+" of "+numBlocks+")")
                Phase1();
              }, isi2Time);
            }, displayTime);
          }, isi1Time);
        }, displayTime);
      }
    }

    /* Phase 2: Scene-Face Continuous Report */
    function Phase2() {
      if (curTrial >= numTrials) { // if end of block
        $("#showTrial").hide()
        curBlock=curBlock+1;
        curTrial = 0;
        $('#progress').text("Trial "+(curTrial+1)+" of "+(numTrialsPerBlock*numStudyReps)+" (Block "+(curBlock+1)+" of "+numBlocks+")")
        AorB1 = Array(numTrialsPerBlock/2).fill(0).concat(Array(numTrialsPerBlock/2).fill(1))
        face_order1 = random.slice(curBlock*numTrialsPerBlock/2,curBlock*numTrialsPerBlock/2+numTrialsPerBlock/2)
        face_order1 = face_order1.concat(face_order1)
        sharedShuffleInPlace(AorB1,face_order1)
        for (var index = 1; index < numStudyReps; index += 1) {
          p = permutation(numTrialsPerBlock)
          face_order = face_order1.concat(permute(face_order1,p))
          AorB = AorB1.concat(permute(AorB1,p))
        }
        alert("End of Test Phase. Starting Study Phase for new faces.")
        Phase1()
      } else {
        $('#item').attr('src',$(window['scene'+scene_order[curTrial]])[0].src).attr("src")
        $('#item').attr('style','display:inline')
        $('#showTrial').show();
        setTimeout(function() {
          $('#item').attr('style','display:none')
          $('#item').attr('src',$(window[face_order[curTrial]+'_'+randomInts(0,119)])[0].src).attr("src")
          setTimeout(function() { // show face and wait for input
            circle_slider();
            $('#item').attr('style','display:inline')
            start_time = new Date();
            $('#report_instruct').show();
            $('#FaceConfirm').show();
          }, isi1Time);
        }, displayTime);
      }
    }

    function AFC() {
      console.log(curTrial,faceAs[face_order[curTrial]],faceBs[face_order[curTrial]])
      cur_button = 0;
      $("#button1").attr("style","text-decoration:none")
      $("#button2").attr("style","text-decoration:none")
      $("#button3").attr("style","text-decoration:none")
      $("#button4").attr("style","text-decoration:none")
      if (curTrial >= numTrialsPerBlock) { // if end of block
        console.log("End of Block.")
        $("#showTrial").hide()
        curTrial = 0;
        alert("End of 2AFC. Starting Face Report task.")
        $('#progress').text("Trial "+(curTrial+1)+" of "+(numTrialsPerBlock)+" (Block "+(curBlock+1)+" of "+numBlocks+")")
        p = permutation(numTrialsPerBlock)
        face_order = permute(face_order1,p)
        AorB = permute(AorB1,p)
        FaceReport()
      } else {
        phase2_AorB.push(AorB[curTrial])
        if (AorB[curTrial]==0) {
          $('#item').attr('src',$(window[face_order[curTrial]+'_'+faceAs[face_order[curTrial]]])[0].src).attr("src")
          phase2_presentations.push(face_order[curTrial]+'_'+faceAs[face_order[curTrial]]);
        } else {
          $('#item').attr('src',$(window[face_order[curTrial]+'_'+faceBs[face_order[curTrial]]])[0].src).attr("src")
          phase2_presentations.push(face_order[curTrial]+'_'+faceBs[face_order[curTrial]]);
        }
        $('#item').attr('style','display:inline')
        $('#showTrial').show();
        setTimeout(function() {
          $('#item').attr('style','display:none')
          setTimeout(function() { // AFC wait till button press
            if (Math.random()<.5) {
              leftSideScene = true
            } else {
              leftSideScene = false
            }
            if (leftSideScene) {
              $('#itemL').attr('src',$(window['scene'+face_order[curTrial]])[0].src).attr("src")
              phase2_Ls.push('scene'+face_order[curTrial]);
              $('#itemR').attr('src',$(window['obj'+face_order[curTrial]])[0].src).attr("src")
              phase2_Rs.push('obj'+face_order[curTrial]);
            } else {
              $('#itemL').attr('src',$(window['obj'+face_order[curTrial]])[0].src).attr("src")
              phase2_Ls.push('obj'+face_order[curTrial]);
              $('#itemR').attr('src',$(window['scene'+face_order[curTrial]])[0].src).attr("src")
              phase2_Rs.push('scene'+face_order[curTrial]);
            }
            $('#itemL').attr('style','display:inline')
            $('#itemR').attr('style','display:inline')
            start_time = new Date();
            $('#numbers').show();
            wait_button()
            function wait_button() {
              if (cur_button==1 || cur_button==2 || cur_button==3 || cur_button==4) {
                phase2_resp.push(cur_button);
                phase2_rts.push(new Date() - start_time);
                if (cur_button < 3 && leftSideScene==true && AorB[curTrial]==0) {
                  correct_choice = true
                } else if (cur_button > 2 && leftSideScene==false && AorB[curTrial]==1) {
                  correct_choice = true
                } else {
                  correct_choice = false
                }
                if (correct_choice) {
                  if (cur_button==3) {
                    phase2_align.push(1)
                  } else if (cur_button==4) {
                    phase2_align.push(2)
                  } else {
                    phase2_align.push(cur_button)
                  }
                } else {
                  if (cur_button==1) {
                    phase2_align.push(3)
                  } else if (cur_button==2) {
                    phase2_align.push(4)
                  } else {
                    phase2_align.push(cur_button)
                  }
                }
                cur_button = 0;
                console.log("responses:",phase2_resp)
                setTimeout(function() {
                  $('#itemL').attr('style','display:none')
                  $('#itemR').attr('style','display:none')
                  $('#numbers').hide();
                  curTrial = curTrial + 1;
                  $('#progress').text("Trial "+(curTrial+1)+" of "+(numTrialsPerBlock)+" (Block "+(curBlock+1)+" of "+numBlocks+")")
                  AFC();
                }, isi2Time);
              } else {
                setTimeout(wait_button, 150);
              }
            }
          }, isi1Time);
        }, displayTime);
      }
    }

    function FaceReport() {
      if (curTrial >= numTrialsPerBlock) { // if end of block
        $("#showTrial").hide()
        curBlock=curBlock+1;
        if (curBlock==numBlocks) {
          Done()
        } else {
          curTrial = 0;
          $('#progress').text("Trial "+(curTrial+1)+" of "+(numTrialsPerBlock*numStudyReps)+" (Block "+(curBlock+1)+" of "+numBlocks+")")
          AorB1 = Array(numTrialsPerBlock/2).fill(0).concat(Array(numTrialsPerBlock/2).fill(1))
          face_order1 = random.slice(curBlock*numTrialsPerBlock/2,curBlock*numTrialsPerBlock/2+numTrialsPerBlock/2)
          face_order1 = face_order1.concat(face_order1)
          sharedShuffleInPlace(AorB1,face_order1)
          for (var index = 1; index < numStudyReps; index += 1) {
            p = permutation(numTrialsPerBlock)
            face_order = face_order1.concat(permute(face_order1,p))
            AorB = AorB1.concat(permute(AorB1,p))
          }
          alert("End of Test Phase. Starting Study Phase for new faces.")
          Phase1()
        }
      } else {
        phase3_AorB.push(AorB[curTrial])
        if (AorB[curTrial]==0) {
          $('#item').attr('src',$(window['scene'+face_order[curTrial]])[0].src).attr("src")
          phase3_presentations.push('scene'+face_order[curTrial]);
          phase3_actual.push(faceAs[face_order[curTrial]])
        } else {
          $('#item').attr('src',$(window['obj'+face_order[curTrial]])[0].src).attr("src")
          phase3_presentations.push('obj'+face_order[curTrial]);
          phase3_actual.push(faceBs[face_order[curTrial]])
        }
        $('#item').attr('style','display:inline')
        $('#showTrial').show();
        setTimeout(function() {
          $('#item').attr('style','display:none')
          $('#item').attr('src',$(window[face_order[curTrial]+'_'+randomInts(0,119)])[0].src).attr("src")
          setTimeout(function() { // show face and wait for input
            $('#item').attr('style','display:inline')
            start_time = new Date();
            $('#slide').show();
            $('#report_instruct').show();
            $('#FaceConfirm').show();
          }, isi1Time);
        }, displayTime);
      }
    }

    function FaceConfirm() {
      console.log("Confirmed.")
      phase3_resp.push($('#slide').val())
      phase3_rts.push(new Date() - start_time);
      $('#item').attr('style','display:none')
      $('#slide').hide();
      $('#report_instruct').hide();
      $('#FaceConfirm').hide();
      setTimeout(function() { 
        curTrial = curTrial + 1;
        $('#progress').text("Trial "+(curTrial+1)+" of "+(numTrialsPerBlock)+" (Block "+(curBlock+1)+" of "+numBlocks+")")
        FaceReport()  
      }, isi1Time);
    }

    /* Always track mouse */
    let mouseX, mouseY;
    $(function() {
      $(document).bind('mousemove.overall', function(e) {
        mouseX = e.pageX;
        mouseY = e.pageY;
      });
    });

    /* Done with the experiment */
    function Done() {
      document.getElementById("doneText").innerHTML = 'Thanks very much for your participation! Please leave any comments to the experimenter below (any technical difficulties?).<br><br>' +
        '<textarea name="comments" id="comments" style="width: 400px; height: 300px"></textarea><br><br>';
      $('#showTrial').hide();
      $('#done').show();
    }

    /* What to save and put it on server */
    function SaveData() {
      $('#done').hide();
      $('#saving').show();
      const endDate = new Date().getTime();
      const d = {
        "workid": WORKERID,
        "assignmentid": ASSIGNMENTID,
        "age": $('#age').val(),
        "gender": $('#gender').val(),
        "race": $('#race').val(),
        "hispanic": $('#hispanic').prop('checked'),
        "nothispanic": $('#nothispanic').prop('checked'),
        "acuity": $('#acuity').prop('checked'),
        "colorvision": $('#colorvision').prop('checked'),
        "StartTime": startDate.getTime(),
        "EndTime": endDate,
        "Date": startDate.getMonth() + '_' + startDate.getDay() + '_' + startDate.getFullYear(),
        "seed": chance1.seed,
        "phase1_numrepeats": phase1_numrepeats,
        "phase1_faces": phase1_faces,
        "phase1_associates": phase1_associates,
        "phase1_AorB": phase1_AorB,
        "phase2_numrepeats": phase2_numrepeats,
        "phase2_presentations": phase2_presentations,
        "phase2_Ls": phase2_Ls,
        "phase2_Rs": phase2_Rs,
        "phase2_resp": phase2_resp,
        "phase2_rts": phase2_rts,
        "phase2_align": phase2_align,
        "phase2_AorB": phase2_AorB,
        "phase3_numrepeats": phase3_numrepeats,
        "phase3_presentations": phase3_presentations,
        "phase3_actual": phase3_actual,
        "phase3_resp": phase3_resp,
        "phase3_rts": phase3_rts,
        "phase3_AorB": phase3_AorB,
        "comments": $('#comments').val()
      };

      /* save JSON to server */
      const blob = new Blob([JSON.stringify(d)], {
        type: "application/json"
      });
      let req = new XMLHttpRequest();
      req.onreadystatechange = () => {
        if (req.readyState == XMLHttpRequest.DONE) {
          console.log(req.responseText);
        }
      };
      req.open("POST", "https://api.jsonbin.io/v3/b", true);
      req.setRequestHeader("Content-Type", "application/json");
      req.setRequestHeader("X-Master-Key", "$2b$10$bx/1giySNtugOA5tf/LBEevdQ2skXRTqsNSxhhtv0VXDUjKm75FhC");
      req.setRequestHeader("X-Collection-Id", "608eb17792cb9267d0c9c3e0");
      req.setRequestHeader("X-Bin-Name", chance1.seed + '_' + startDate.getMonth() + '_' + startDate.getDay() + '_' + startDate.getFullYear() + '.json');
      req.send(blob);

      document.getElementById("saving").innerHTML = "Submitting...";

      /* submit after waiting a few seconds to make sure data got sent */
      setTimeout(function() {
        document.getElementById("saving").innerHTML = "Experiment complete! You may close this window.";
      }, 5000);
    }

    function setImage(obj) {
      // console.log(obj.value)
      $('#item').attr('src',$(window[face_order[curTrial]+'_'+obj.value])[0].src).attr("src")
    }

    /*check all images are loaded before starting*/
    function ImagesReady() {
      for (var i = 0; i < img_ids.length; i++) {
          //console.log(i)
          if (!$(img_ids[i])[0].complete) {
              var percentage = i * 100.0 / (img_ids.length);
              percentage = percentage.toFixed(0).toString() + ' %';

              document.getElementById("loading").innerHTML =
                'Loading images ... ' + percentage + '<br>If more than a minute elapses, try refreshing page.';
              setTimeout('ImagesReady()', 20);
              return;
          }
      }
      $('#loading').hide();
      console.log("Images fully loaded.")
      StartExperiment()
    };

    /* running on IE? */
    function isIE() {
      ua = navigator.userAgent;
      var is_ie = ua.indexOf("MSIE ") > -1 || ua.indexOf("Trident/") > -1;
      return is_ie;
    }

    $(function() { // check if IE, mobile, or slow internet
        if (isIE()) { // if IE
            $('body').html('Unfortunately this HIT does not work in Internet Explorer. It works in Chrome or Safari only. Sorry!');
        } else if (
            /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i
            .test(navigator.userAgent) ||
            /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i
            .test(navigator.userAgent.substr(0, 4))) {
            $('body').html('Unfortunately this HIT does not work on mobile devices. It works on desktop versions of Chrome or Safari only. Sorry!'); // dont allow mobile
        }
    });

    function modalContinue() {
      modalClosed = true;
      $("#openModal").hide()
    }

    // circle slider code (https://codepen.io/MitchJackson94/pen/vYPyRq
    function circle_slider() {
        $('.circle_container').attr('style','display:inline')
        var sliderW2 = $('#slider').width()/2;
        var sliderH2 = 25/2; // $('#slider').height()/2
        var radius = $('#circle').width()/2;   
        var elP = $('#circle').offset();
        var elPos = { x: elP.left, y: elP.top};
        var X = $('.circle_container').left, Y = $('.circle_container').top;
        var mdown = false;
        $('#circle')
        .mousedown(function (e) { mdown = true; })
        .mouseup(function (e) { mdown = false; })
        .mousemove(function (e) {
            if (mdown) {
              $('#slider').attr('style','height:25px')
              var mPos = {x: e.clientX-elPos.x, y: e.clientY-elPos.y};
              var atan = Math.atan2(mPos.x-radius, mPos.y-radius);
              deg = -atan/(Math.PI/180) + 180; // final (0-360 positive) degrees from mouse position 
              // Present updated Face
              deg_corr = Math.floor(deg / 3)             
              console.log(deg_corr)
              $('#item').attr('src',$(window[face_order[curTrial]+'_'+deg_corr])[0].src).attr("src")

              X = Math.round(radius* Math.sin(deg*Math.PI/180));    
              Y = Math.round(radius*  -Math.cos(deg*Math.PI/180));
              $('#slider').css({ left: X+radius-sliderW2, top: Y+radius-sliderH2 });              
              // AND FINALLY apply exact degrees to ball rotation
              $('#slider').css({ WebkitTransform: 'rotate(' + deg + 'deg)'});
              $('#slider').css({ '-moz-transform': 'rotate(' + deg + 'deg)'});
            }
        });
    };

    document.body.onkeyup = function(e){
      keyCode = e.keyCode;
      if (keyCode==32) {
        // document.getElementById("buttonpressed").innerHTML="You pressed spacebar! "+keyCode
      } else if ((keyCode>48) & (keyCode<55)) {
        cur_button = keyCode-48;
        $("#button1").attr("style","text-decoration:none")
        $("#button2").attr("style","text-decoration:none")
        $("#button3").attr("style","text-decoration:none")
        $("#button4").attr("style","text-decoration:none")
        if (cur_button==1) {
          $("#button1").attr("style","font-weight:bold")
        } else if (cur_button==2) {
          $("#button2").attr("style","font-weight:bold")
        } else if (cur_button==3) {
          $("#button3").attr("style","font-weight:bold")
        } else if (cur_button==4) {
          $("#button4").attr("style","font-weight:bold")
        }
      } else {
        // document.getElementById("buttonpressed").innerHTML="You pressed " + String.fromCharCode(keyCode) + "!"+keyCode
      }
    }
  </script>
</body>
</html>
